var txdaWebframeHelper=(()=>{var r=Object.defineProperty;var u=s=>r(s,"__esModule",{value:!0});var c=(s,t)=>{u(s);for(var e in t)r(s,e,{get:t[e],enumerable:!0})};var p={};c(p,{initialize:()=>m});var o=(s,t)=>{t._message&&s.addEventListener("message",e=>{t._message?.(e)}),t.onConnected&&s.addEventListener("message",e=>{e.data?.messageType==="txdaConnectionAcknowledgement"&&t.onConnected?.(e.data?.metaData)}),t.onUpdateCurrentDesign&&s.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesign"){let{metaData:a,data:n}=e.data;t.onUpdateCurrentDesign?.(n,a)}}),t.onUpdateCurrentDesign3d&&s.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesign3d"){let{metaData:a,data:n}=e.data;t.onUpdateCurrentDesign3d?.(n,a)}}),t.onUpdateCurrentDesignData&&s.addEventListener("message",e=>{if(e.data?.messageType==="txdaCurrentDesignData"){let{metaData:a,data:n}=e.data;t.onUpdateCurrentDesignData?.(n,a)}}),t.onUpdateSelectedDesignIds&&s.addEventListener("message",e=>{if(e.data?.messageType==="txdaSelectedDesignIds"){let{metaData:a,data:n}=e.data;t.onUpdateSelectedDesignIds?.(n,a)}})};var m=(s,t={})=>new Promise((e,a)=>{let n=new URL(s).origin;if(n==="*"){a("Specific target origins must be specified to connect to TXDA installs");return}let D=d=>{if(d.data?.messageType==="txdaMessagePortTransfer"){if(d.origin!==n){a("Attempted TXDA connection event from unauthorized origin");return}if(d.source!==window.parent){a("Attempted TXDA connection event from unauthorized source");return}let i=d.ports[0];o(i,t),i.start(),i.postMessage({messageType:"txdaRequestCurrentDesign"}),e({_port:i,requestCurrentDesign:()=>i.postMessage({messageType:"txdaRequestCurrentDesign"}),requestCurrentDesign3d:()=>i.postMessage({messageType:"txdaRequestCurrentDesign3d"}),requestCurrentDesignData:()=>i.postMessage({messageType:"txdaRequestCurrentDesignData"}),addCurrentDesignData:g=>i.postMessage({messageType:"txdaAddCurrentDesignData",data:g}),addCurrentStructureData:g=>i.postMessage({messageType:"txdaAddCurrentStructureData",data:g}),disconnect:()=>{i.close(),t.onDisconnected?.()}})}};window.addEventListener("message",D,{once:!0}),window.parent.postMessage({messageType:"txdaConnectionRequest",windowName:window.name},n),setTimeout(()=>{a("Connection to TXDA failed (timed out)")},1e4)});return p;})();
//# sourceMappingURL=txda-webframe-helper.min.js.map
